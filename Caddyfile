{$DOMAIN} {
    encode gzip zstd

    @api path /api* /healthz
    handle @api {
        reverse_proxy backend:3000
        # If your backend does not expect the /api prefix, uncomment:
        # uri strip_prefix /api
    }

    handle {
        root * /usr/share/caddy
        try_files {path} /index.html
        file_server
    }

    log {
        output stdout
        format console
    }

    header {
        X-Content-Type-Options nosniff
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    }
}
